<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Local Information Time Evolution (LITE): Configuration and Logging Infrastructure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Local Information Time Evolution (LITE)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__2_users_2christoph_2github_2local__information_2docs_2config.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Configuration and Logging Infrastructure</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Configurations</h1>
<p>This module provides a set of dataclasses and logging utilities designed to coordinate parameter configuration and structured logging for scientific simulations—especially those involving parallel execution with MPI. It manages configuration for time evolution, minimization, and integrations (Runge-Kutta), and offers robust, MPI-sensitive logging to file and console.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md3"></a>
LoggingConfig</h1>
<p>Controls where logs are written and their verbosity.</p><ul>
<li><b>Parameters:</b><ul>
<li><code>logging_folder</code> (<code>str</code>): Directory for log files.</li>
<li><code>log_level_console</code> (<code>int</code>): Console log level (e.g. <code>logging.INFO</code>).</li>
<li><code>log_level_file</code> (<code>int</code>): File log level (e.g. <code>logging.DEBUG</code>).</li>
</ul>
</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md5"></a>
RungeKuttaConfig</h1>
<p>Collects parameters related to the Runge-Kutta integration.</p><ul>
<li><b>Parameters:</b><ul>
<li><code>petz_map</code> (<code>str</code>): Type of Petz map for integration ('sqrt', 'exponential', etc.).</li>
<li><code>RK_order</code> (<code>str</code>): Order of Runge-Kutta scheme ('45', '23', '1012').</li>
<li><code>max_error</code> (<code>float</code>): Maximum allowable integration error. Must be &gt; 0.</li>
<li><code>step_size</code> (<code>float</code>): Adaptive stepsize to use during integration.</li>
</ul>
</li>
<li><b>Validation:</b> Asserts that <code>max_error</code> is positive.</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md7"></a>
MinimizationConfig</h1>
<p>Contains all parameters related to (local) information minimization.</p><ul>
<li><b>Parameters:</b><ul>
<li><code>minimization_threshold</code>: Info threshold to trigger minimization (0–1).</li>
<li><code>minimization_tolerance</code>: Relative reduction required per step.</li>
<li><code>conjugate_gradient_tolerance</code>: Tolerance for conjugate gradient convergence.</li>
<li><code>conjugate_gradient_damping</code>: Damping parameter for conjugate gradient.</li>
</ul>
</li>
<li><b>Validation:</b> Asserts each parameter is in (0, 1).</li>
</ul>
<hr  />
 <h1><a class="anchor" id="time_evolution_config"></a>
TimeEvolutionConfig</h1>
<p>Main configuration for a simulation run.</p><ul>
<li><b>Parameters:</b><ul>
<li><code>max_l</code>, <code>min_l</code>: Integer levels for time evolution/minimization. Tim evolution operates between these two scales: information is minimized at level <code>min_l</code> after a minimization is triggered when the system reached <code>minimization_threshold</code> at <code>max_l</code>.</li>
<li><code>update_dyn_max_l_threshold</code>: Precision threshold for dynamic updates of the evolution length-scale.</li>
<li><code>system_size_tol</code>: Tolerance for checking density matrix equality. This parameter controls dynamic increases in the system size: the effective system is increased when the density matrices deviate by <code>system_size_tol</code> from infinite temperature density matrices.</li>
<li><code>shift</code>: Used for numerical stability (should be ≥ 0).</li>
<li><code>save_checkpoint</code>: Whether to save checkpoints.</li>
<li><code>checkpoint_folder</code>: Directory for checkpoints and logs.</li>
<li><code>logging_config</code>: Instance of <code>LoggingConfig</code>.</li>
<li><code>runge_kutta_config</code>: Instance of <code>RungeKuttaConfig</code>.</li>
<li><code>minimization_config</code>: Instance of <code>MinimizationConfig</code>.</li>
</ul>
</li>
<li><b>Validation:</b> Checks that thresholds make sense—and warns about settings with subtle effects.</li>
<li><b>Logging Setup:</b> Sets up the log directory and logging handlers if not already configured.</li>
<li><b>Serialization:</b><ul>
<li><code>from_yaml</code>: Load configuration from a YAML file.</li>
<li><code>to_yaml</code>: Save configuration to a YAML file (default location: <code>checkpoint_folder/config.yaml</code>).</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Usage Workflow</h2>
<ol type="1">
<li><b>Create a <code>TimeEvolutionConfig</code> instance</b>, either programmatically or by loading a YAML file.</li>
<li>On instantiation, configuration parameters are validated and logging is set up based on <code>logging_config</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md10"></a>
Example: Creating and Saving a Configuration</h2>
<div class="fragment"><div class="line">config = TimeEvolutionConfig(checkpoint_folder=<span class="stringliteral">&quot;my_data&quot;</span>)</div>
<div class="line">config.to_yaml()  <span class="comment"># Saves to my_data/config.yaml</span></div>
<div class="line">config = TimeEvolutionConfig.from_yaml(<span class="stringliteral">&quot;my_data/config.yaml&quot;</span>)</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md12"></a>
Data handling</h1>
<hr  />
 <h2><a class="anchor" id="data_config"></a>
DataConfig</h2>
<p>Holds configuration for observable computation and data collection.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Attributes</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Attribute   </th><th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Default   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>observables</code>   </td><td class="markdownTableBodyLeft"><code>List</code>   </td><td class="markdownTableBodyLeft"><code>[]</code>   </td><td class="markdownTableBodyLeft">List of user-defined observables (callables) to be computed.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>info_lattice</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>False</code>   </td><td class="markdownTableBodyLeft">Whether to compute information lattice observable.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>info_current</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>False</code>   </td><td class="markdownTableBodyLeft">Whether to compute information current observable.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>diffusion_length</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>True</code>   </td><td class="markdownTableBodyLeft">Whether to compute diffusion length.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>diffusion_const</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>True</code>   </td><td class="markdownTableBodyLeft">Whether to compute diffusion constant.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>energy_distribution</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>False</code>   </td><td class="markdownTableBodyLeft">Whether to compute energy distribution.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>times</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>True</code>   </td><td class="markdownTableBodyLeft">Whether to record time observable.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>system_size</code>   </td><td class="markdownTableBodyLeft"><code>bool</code>   </td><td class="markdownTableBodyLeft"><code>True</code>   </td><td class="markdownTableBodyLeft">Whether to record system size observable.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md15"></a>
Serialization Methods</h3>
<ul>
<li><code>to_dict()</code>: Converts configuration to dictionary for YAML serialization, converting any callable observables to their function names.</li>
<li><code>to_yaml(folder)</code>: Saves the configuration as a YAML file named <code>data_config.yaml</code> within the specified folder.</li>
<li><code>from_yaml(folder, full_module_path="")</code>: Static method that loads configuration from <code>data_config.yaml</code>, dynamically importing and converting observable function names back to callable functions from the provided module path.</li>
</ul>
<hr  />
 <h2><a class="anchor" id="data_container"></a>
DataContainer</h2>
<p>Stores observable data and configuration, manages updates of observables from the current state, and handles checkpoint saving/loading in MPI environments.</p>
<h3><a class="anchor" id="autotoc_md17"></a>
Initialization and Configuration</h3>
<ul>
<li>Initializes with a <code>DataConfig</code> instance.</li>
<li>Sets up internal empty dictionaries for default and custom observables depending on config.</li>
<li>Can be constructed from YAML configuration with <code>from_yaml</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md18"></a>
Observables Handling</h3>
<ul>
<li><b>Default Observables</b>: Computed using the <code>DefaultObservables</code> helper class and stored in a dictionary keyed by observable name.</li>
<li><b>Custom Observables</b>: Computed by calling user-supplied functions on <code>density_matrix</code> and stored similarly keyed by their function name.</li>
<li>Supports dynamic updating/appending of data lists per observable.</li>
</ul>
<h3><a class="anchor" id="autotoc_md19"></a>
Methods</h3>
<ul>
<li><code>return_latest()</code>: Returns a dictionary containing the latest values (last elements) for all observables, both default</li>
<li>and custom. Returns <code>None</code> if no data exists.</li>
<li><code>save_checkpoint(folder, warning=True)</code>: Saves current observables' data to pickle files per observable name in the given folder, along with saving the</li>
<li>configuration YAML. Only rank 0 performs saving; others reset their buffers.</li>
<li><code>load_checkpoint(folder)</code>: Loads observable data from pickle files if they exist.</li>
<li><code>attach_to_existing_file(folder)</code>: Loads existing data, appends new data, and saves updated checkpoint to disk.</li>
<li><code>filepath_exists(folder)</code>: Checks if the default observable files exist in a folder.</li>
<li><code>load_times(folder)</code>: Static method to load times array from a <code>times.pkl</code> pickle.</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
DefaultObservables {§default_observables}</h2>
<p>Helper class that encapsulates calculation of default observables.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Supported Observables and Their Computation Methods</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Observable   </th><th class="markdownTableHeadLeft">Method Name   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>diffusion_const</code>   </td><td class="markdownTableBodyLeft"><code>get_diffusion_const</code>   </td><td class="markdownTableBodyLeft">Computes diffusion constant from the given density matrix, state, and operator.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>diffusion_length</code>   </td><td class="markdownTableBodyLeft"><code>get_diffusion_length</code>   </td><td class="markdownTableBodyLeft">Computes diffusion length from <code>rho_dict</code> and operator.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>energy_distribution</code>   </td><td class="markdownTableBodyLeft"><code>get_energy_distribution</code>   </td><td class="markdownTableBodyLeft">Computes energy distribution similarly.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>system_size</code>   </td><td class="markdownTableBodyLeft"><code>get_system_size</code>   </td><td class="markdownTableBodyLeft">Returns current system size from state.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>times</code>   </td><td class="markdownTableBodyLeft"><code>get_time</code>   </td><td class="markdownTableBodyLeft">Returns current time from state.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>info_lattice</code>   </td><td class="markdownTableBodyLeft"><code>get_information_lattice</code>   </td><td class="markdownTableBodyLeft">Returns the information lattice (passed from outside).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>info_current</code>   </td><td class="markdownTableBodyLeft"><code>get_information_current</code>   </td><td class="markdownTableBodyLeft">Returns the information current from the state and operator.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md22"></a>
Observable Computation Flow</h3>
<ul>
<li>Invoked with observable name, <code>density_matrix</code>, information dictionary, <code>State</code> instance, and <code>SystemOperator</code>.</li>
<li>Only performs computation on MPI rank 0; others return <code>None</code>.</li>
<li>Returns the computed observable value or <code>None</code> if the observable is not recognized. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
